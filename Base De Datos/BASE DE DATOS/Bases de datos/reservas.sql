DROP DATABASE IF EXISTS reservas;
CREATE DATABASE reservas;
USE reservas;
GRANT ALL ON reservas.* TO usuario1 IDENTIFIED BY 'usuario1';
FLUSH PRIVILEGES;

DROP TABLE IF EXISTS RESERVAS;
DROP TABLE IF EXISTS FACTURACION;
DROP TABLE IF EXISTS CLIENTES;
DROP TABLE IF EXISTS PRECIOS;
DROP TABLE IF EXISTS APARTAMENTOS;

CREATE TABLE PRECIOS (
 GRUPO              INTEGER(1) PRIMARY KEY,
 PRECIO_DIA         INTEGER(3)
);

CREATE TABLE APARTAMENTOS (
APARTAMENTO         INTEGER(2),
METROS              INTEGER(2),
DORMITORIOS         INTEGER(1),
UBICACION	    VARCHAR(12),
CONSTRUIDO	    VARCHAR(4),
RENOVADO	    DATE,
NIO		    CHAR(1),
EQUIPAMIENTO_EXTRA  VARCHAR(15),
GRUPO_PRECIO	    INTEGER(1),
OCUPACION_MAXIMA    INTEGER(1),
CONSTRAINT APARTAMENTOS_PK PRIMARY KEY (APARTAMENTO),
CONSTRAINT APARTAMENTOS_PRECIOS_FK FOREIGN KEY (GRUPO_PRECIO) REFERENCES PRECIOS (GRUPO)
);

CREATE TABLE CLIENTES (
CLIENTE		INTEGER PRIMARY KEY,
NOMBRE		VARCHAR(12),
APELLIDOS	VARCHAR(12),
CALLE		VARCHAR(20),
CP		VARCHAR(5),
CIUDAD		VARCHAR(12),
TELEFONO	VARCHAR(15),
NACIDO		DATE
);

CREATE TABLE RESERVAS(
RESERVA		INTEGER PRIMARY KEY,
CLIENTE		INTEGER,
APARTAMENTO	INTEGER (2),
ENTRADA		DATE,
SALIDA		DATE,
CONSTRAINT RESERVAS_APARTAMENTOS_FK FOREIGN KEY (APARTAMENTO) REFERENCES APARTAMENTOS (APARTAMENTO),
CONSTRAINT RESERVAS_CLIENTES_FK FOREIGN KEY (CLIENTE) REFERENCES CLIENTES (CLIENTE)
);



CREATE TABLE FACTURACION(
RESERVA		INTEGER PRIMARY KEY,
IMPORTE		INTEGER,
FORMA_PAGO	VARCHAR(10),
OBSERVACIONES	VARCHAR(200),
CONSTRAINT FACTURACION_RESERVAS_FK FOREIGN KEY (RESERVA) REFERENCES RESERVAS (RESERVA)
);

INSERT INTO PRECIOS VALUES (1,72);
INSERT INTO PRECIOS VALUES (2,99);
INSERT INTO PRECIOS VALUES (3,121);
INSERT INTO PRECIOS VALUES (4,131);
INSERT INTO PRECIOS VALUES (5,165);

INSERT INTO APARTAMENTOS VALUES (1,22,0,'Planta baja',1988,'2000/03/29','S',null,1,2);
INSERT INTO APARTAMENTOS VALUES (2,22,0,'Planta baja',1988,'2000/03/29','S',null,1,2);
INSERT INTO APARTAMENTOS VALUES (3,20,0,'Primer piso',1988,'2000/03/29','N',null,1,2);
INSERT INTO APARTAMENTOS VALUES (4,20,0,'Primer piso',1988,'2000/03/29','N',null,1,2);
INSERT INTO APARTAMENTOS VALUES (5,24,0,'Planta baja',1990,'2000/03/29','S',null,2,2);
INSERT INTO APARTAMENTOS VALUES (6,24,0,'Planta baja',1990,'2000/03/29','S',null,2,2);
INSERT INTO APARTAMENTOS VALUES (7,24,0,'Planta baja',1990,'2000/03/29','S',null,2,0);
INSERT INTO APARTAMENTOS VALUES (8,24,0,'Primer piso',1990,'2000/03/29','S',null,2,2);
INSERT INTO APARTAMENTOS VALUES (9,19,0,'Primer piso',1990,'2000/03/29','N',null,1,2);
INSERT INTO APARTAMENTOS VALUES (10,19,0,'Planta baja',1990,'2000/03/29','N',null,1,2);
INSERT INTO APARTAMENTOS VALUES (11,30,1,'Planta baja',1990,'2000/03/29','N','Cuarto de bao',3,3);
INSERT INTO APARTAMENTOS VALUES (12,30,1,'Planta baja',1994,'2000/03/29','N','Cuarto de bao',3,3);
INSERT INTO APARTAMENTOS VALUES (13,30,1,'Primer piso',1994,'2000/03/29','N','Cuarto de bao',3,3);
INSERT INTO APARTAMENTOS VALUES (14,30,1,'Primer piso',1994,'2000/03/29','N','Cuarto de bao',3,3);
INSERT INTO APARTAMENTOS VALUES (15,42,2,'Planta baja',1995,'1997/03/29','S',null,4,4);
INSERT INTO APARTAMENTOS VALUES (16,42,2,'Planta baja',1995,'1997/03/29','S',null,4,4);
INSERT INTO APARTAMENTOS VALUES (17,42,2,'Planta baja',1995,'1997/03/29','S',null,4,4);
INSERT INTO APARTAMENTOS VALUES (18,42,2,'Planta baja',1995,'1997/03/29','S',null,4,4);
INSERT INTO APARTAMENTOS VALUES (19,40,2,'Primer piso',1997,'1999/03/30','N',null,4,4);
INSERT INTO APARTAMENTOS VALUES (20,40,2,'Primer piso',1997,'1999/03/30','N',null,4,4);
INSERT INTO APARTAMENTOS VALUES (21,40,2,'Primer piso',1997,'1999/03/30','N',null,4,4);
INSERT INTO APARTAMENTOS VALUES (22,58,3,'Planta baja',1999,'2001/03/29','S',null,5,7);
INSERT INTO APARTAMENTOS VALUES (23,58,3,'Planta baja',1999,'2001/03/29','S',null,5,7);
INSERT INTO APARTAMENTOS VALUES (24,58,3,'Primer piso',1999,'2001/03/29','S',null,5,7);
INSERT INTO APARTAMENTOS VALUES (25,58,3,'Primer piso',1999,'2001/03/29','S',null,5,7);
INSERT INTO APARTAMENTOS VALUES (26,28,1,'Planta baja',1999,'2001/03/29','S',null,3,3);
INSERT INTO APARTAMENTOS VALUES (27,28,1,'Planta baja',1999,'2001/03/29','S',null,3,3);
INSERT INTO APARTAMENTOS VALUES (28,28,1,'Planta baja',1999,'2001/03/29','S',null,3,3);
INSERT INTO APARTAMENTOS VALUES (29,25,1,'Primer piso',2000,'2002/03/30','N',null,2,3);
INSERT INTO APARTAMENTOS VALUES (30,25,1,'Primer piso',2000,'2002/03/30','N',null,2,3);


INSERT INTO CLIENTES VALUES (1,'Mara','Arnal','Urgel, 15','36433','Barcelona','9991234442','1961/11/07');
INSERT INTO CLIENTES VALUES (2,'Pedro','Corts','Urgel, 11','36433','Barcelona','9991234443','1960/06/15');
INSERT INTO CLIENTES VALUES (3,'Andrs','Martn','Urgel, 17','36433','Barcelona','9991234444','1970/01/25');
INSERT INTO CLIENTES VALUES (4,'Sibilia','Aliaga','Casanovas, 156','63075','Talavera','9991234466','1959/05/01');
INSERT INTO CLIENTES VALUES (5,'Toms','Martn','Muntaner, 20','33142','Valencia','9991234467','1953/05/18');
INSERT INTO CLIENTES VALUES (6,'Claudio','Pesto','Madrid, 98','60418','Zaragoza','9991234468','1947/12/28');
INSERT INTO CLIENTES VALUES (7,'Petra','Pesto','Madrid, 98','60418','Zaragoza','9991234469','1949/01/29');
INSERT INTO CLIENTES VALUES (8,'Toms','Alianza','Balmes, 987','28083','Barcelona','9991234470','1975/03/28');
INSERT INTO CLIENTES VALUES (9,'Irene','Bruna','Balmes, 235','28083','Barcelona','9991234471','1956/02/21');

INSERT INTO RESERVAS VALUES (199904001,4,8,'2005/12/06','2005/12/25');
INSERT INTO RESERVAS VALUES (199904002,1,23,'2005/12/05','2005/12/25');
INSERT INTO RESERVAS VALUES (199904003,2,17,'2005/12/05','2005/12/25');
INSERT INTO RESERVAS VALUES (199904004,3,30,'2005/12/11','2005/12/25');
INSERT INTO RESERVAS VALUES (199904005,5,10,'2005/12/18','2006/01/01');
INSERT INTO RESERVAS VALUES (199905001,4,2,'2006(01/09','2006/01/30');
INSERT INTO RESERVAS VALUES (199906002,1,27,'2006/02/13','2006/02/27');
INSERT INTO RESERVAS VALUES (199906003,4,30,'2006/02/23','2006/03/09');
INSERT INTO RESERVAS VALUES (199906004,2,2,'2006/03/02','2006/03/09');
INSERT INTO RESERVAS VALUES (199906005,3,7,'2006/02/17','2006/02/27');
INSERT INTO RESERVAS VALUES (199907001,4,15,'2006/04/02','2006/04/15');
INSERT INTO RESERVAS VALUES (199907002,5,16,'2006/04/02','2006/04/15');
INSERT INTO RESERVAS VALUES (199907003,8,17,'2006/04/02','2006/04/15');
INSERT INTO RESERVAS VALUES (199908001,7,18,'2006/04/06','2006/04/22');
INSERT INTO RESERVAS VALUES (199908002,9,23,'2006/04/10','2006/05/04');
INSERT INTO RESERVAS VALUES (199908003,3,24,'2006/04/10','2006/05/04');
INSERT INTO RESERVAS VALUES (199908004,2,11,'2006/04/19','2006/05/07');
INSERT INTO RESERVAS VALUES (199908005,1,25,'2006/04/19','2006/05/20');
COMMIT;
